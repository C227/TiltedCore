steps:
  - checkout: self
    lfs: boolean
    submodules: recursive

  - task: PowerShell@2
    script: |
      Invoke-Expression (Invoke-Webrequest 'https://xmake.io/psget.text' -UseBasicParsing).Content

  - script: |
      xmake
    displayName: Build

  - script: |
      cd build/windows/x64/release
      Tests.exe
    displayName: Test
